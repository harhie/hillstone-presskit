<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Press Kit Admin - Hillstone Partners</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="admin-body">
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-box">
            <div class="login-header">
                <img src="https://page.gensparksite.com/v1/base64_upload/a08c5a14068edb87be617287f3b7f66c" alt="Hillstone Partners" class="login-logo">
                <h2>관리자 로그인</h2>
                <p>Hillstone Partners Press Kit</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="password">비밀번호</label>
                    <input type="password" id="password" placeholder="비밀번호를 입력하세요" required>
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i> 로그인
                </button>
                <p class="login-hint">기본 비밀번호: admin123</p>
            </form>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="admin-dashboard" style="display: none;">
        <!-- Admin Header -->
        <header class="admin-header">
            <div class="container">
                <div class="admin-header-content">
                    <div class="admin-logo-container">
                        <img src="https://page.gensparksite.com/v1/base64_upload/a08c5a14068edb87be617287f3b7f66c" alt="Hillstone Partners" class="admin-logo-main">
                        <img src="https://page.gensparksite.com/v1/base64_upload/7c1ebb32f19e3cdecad0607e4609eafb" alt="Press Kit" class="admin-logo-presskit">
                        <span class="admin-badge">관리자</span>
                    </div>
                    <div class="admin-actions">
                        <button id="githubSyncBtn" class="btn btn-success" onclick="syncToGithub()">
                            <i class="fas fa-sync-alt"></i> GitHub에 동기화
                        </button>
                        <button id="githubSettingsBtn" class="btn btn-secondary" onclick="openGithubSettingsModal()">
                            <i class="fab fa-github"></i> GitHub 설정
                        </button>
                        <button id="changePasswordBtn" class="btn btn-secondary" onclick="console.log('버튼 클릭됨'); openChangePasswordModal();">
                            <i class="fas fa-key"></i> 비밀번호 변경
                        </button>
                        <a href="newsroom.html" class="btn btn-secondary" target="_blank">
                            <i class="fas fa-eye"></i> 뉴스룸 보기
                        </a>
                        <button id="logoutBtn" class="btn btn-outline">
                            <i class="fas fa-sign-out-alt"></i> 로그아웃
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Admin Main Content -->
        <main class="admin-main">
            <div class="container">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #ff6b35;">
                            <i class="fas fa-newspaper"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="statTotal">0</h3>
                            <p>전체 항목</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #ff8a5b;">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="statArticles">0</h3>
                            <p>기사</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #ffa87d;">
                            <i class="fas fa-bullhorn"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="statPhotos">0</h3>
                            <p>공지</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #e85a2a;">
                            <i class="fas fa-video"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="statVideos">0</h3>
                            <p>영상</p>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="admin-toolbar">
                    <button id="addNewBtn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> 새 항목 추가
                    </button>
                </div>

                <!-- Items Table -->
                <div class="admin-table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>제목</th>
                                <th>카테고리</th>
                                <th>날짜</th>
                                <th>출처</th>
                                <th>작업</th>
                            </tr>
                        </thead>
                        <tbody id="adminItemsList">
                            <!-- Items will be dynamically loaded here -->
                        </tbody>
                    </table>
                    <div id="emptyAdminState" class="empty-state" style="display: none;">
                        <i class="fas fa-inbox"></i>
                        <p>등록된 항목이 없습니다.</p>
                        <button class="btn btn-primary" onclick="document.getElementById('addNewBtn').click()">
                            <i class="fas fa-plus"></i> 첫 항목 추가하기
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add/Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content modal-large">
            <button class="modal-close" id="closeEditModal">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <h2 id="modalTitle"><i class="fas fa-plus"></i> 새 항목 추가</h2>
            </div>
            <div class="modal-body">
                <form id="editForm" class="edit-form">
                    <input type="hidden" id="editId">
                    
                    <div class="form-group">
                        <label for="editTitle">제목 *</label>
                        <input type="text" id="editTitle" placeholder="제목을 입력하세요" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="editCategory">카테고리 *</label>
                            <select id="editCategory" required>
                                <option value="">선택하세요</option>
                                <option value="article">기사</option>
                                <option value="foreign">해외기사</option>
                                <option value="photo">공지</option>
                                <option value="video">영상</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="editDate">날짜 *</label>
                            <input type="date" id="editDate" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="editSource">출처 *</label>
                        <input type="text" id="editSource" placeholder="예: 조선일보, TechCrunch" required>
                    </div>

                    <div class="form-group">
                        <label for="editSummary">요약</label>
                        <textarea id="editSummary" rows="4" placeholder="2-3줄 분량의 요약을 입력하세요 (선택사항)"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="editLink">링크 URL</label>
                        <input type="url" id="editLink" placeholder="https://example.com/article">
                    </div>

                    <div class="form-group" id="singleImageGroup">
                        <label for="editImage">이미지 URL</label>
                        <input type="url" id="editImage" placeholder="https://example.com/image.jpg">
                    </div>

                    <!-- Multiple Images for Photo Category -->
                    <div class="form-group" id="multipleImagesGroup" style="display: none;">
                        <label>이미지 URL (공지 - 여러 장)</label>
                        <div id="imageUrlsContainer">
                            <div class="image-url-item">
                                <input type="url" class="image-url-input" placeholder="https://example.com/image1.jpg">
                                <button type="button" class="btn-remove-image">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-secondary" id="addImageUrlBtn" style="margin-top: 0.5rem;">
                            <i class="fas fa-plus"></i> 이미지 URL 추가
                        </button>
                        <p class="text-sm text-gray-500" style="margin-top: 0.5rem;">공지 카테고리는 여러 장의 이미지를 추가할 수 있습니다.</p>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelEditBtn">취소</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> 저장
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="closeChangePasswordModal">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <h2><i class="fas fa-key"></i> 비밀번호 변경</h2>
            </div>
            <div class="modal-body">
                <div style="background: #d1ecf1; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem; border-left: 4px solid #0c5460;">
                    <p style="margin: 0; color: #0c5460;">
                        <i class="fas fa-info-circle"></i> 
                        <strong>안내:</strong> 새 비밀번호는 브라우저에 저장됩니다. 다른 브라우저나 기기에서는 기본 비밀번호(admin123)를 사용하세요.
                    </p>
                </div>
                <form id="changePasswordForm" class="edit-form">
                    <div class="form-group">
                        <label for="currentPassword">현재 비밀번호 *</label>
                        <input type="password" id="currentPassword" placeholder="현재 비밀번호를 입력하세요" required>
                    </div>

                    <div class="form-group">
                        <label for="newPassword">새 비밀번호 *</label>
                        <input type="password" id="newPassword" placeholder="새 비밀번호를 입력하세요" required minlength="6">
                        <p class="text-sm text-gray-500" style="margin-top: 0.5rem;">
                            최소 6자 이상
                        </p>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">새 비밀번호 확인 *</label>
                        <input type="password" id="confirmPassword" placeholder="새 비밀번호를 다시 입력하세요" required minlength="6">
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelChangePasswordBtn">취소</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> 변경
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- GitHub Settings Modal -->
    <div id="githubSettingsModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="closeGithubSettingsModal">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <h2><i class="fab fa-github"></i> GitHub 설정</h2>
            </div>
            <div class="modal-body">
                <div style="background: #fff3cd; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem; border-left: 4px solid #ffc107;">
                    <p style="margin: 0; color: #856404;">
                        <i class="fas fa-exclamation-triangle"></i> 
                        <strong>보안 주의:</strong> GitHub Token은 비공개로 유지하세요. 
                        <a href="GITHUB_TOKEN_SETUP.md" target="_blank" style="color: #856404; text-decoration: underline;">설정 가이드 보기</a>
                    </p>
                </div>
                <form id="githubSettingsForm" class="edit-form">
                    <div class="form-group">
                        <label for="githubToken">GitHub Personal Access Token *</label>
                        <input type="password" id="githubToken" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" required>
                        <p class="text-sm text-gray-500" style="margin-top: 0.5rem;">
                            repo 권한이 있는 Token이 필요합니다.
                        </p>
                    </div>

                    <div class="form-group">
                        <label for="githubOwner">Repository Owner *</label>
                        <input type="text" id="githubOwner" value="harhie" required>
                    </div>

                    <div class="form-group">
                        <label for="githubRepo">Repository Name *</label>
                        <input type="text" id="githubRepo" value="hillstone-presskit" required>
                    </div>

                    <div class="form-group">
                        <label for="githubBranch">Branch *</label>
                        <input type="text" id="githubBranch" value="main" required>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelGithubSettingsBtn">취소</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> 설정 저장
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="js/admin.js"></script>
</body>
</html>
