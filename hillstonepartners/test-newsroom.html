<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newsroom Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-panel {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            background: #ff6b35;
            color: white;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #e85a2a;
        }
        pre {
            background: #2d2d2d;
            color: #f8f8f8;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
        .success { color: #10b981; font-weight: bold; }
        .error { color: #ef4444; font-weight: bold; }
        .info { color: #3b82f6; font-weight: bold; }
        iframe {
            width: 100%;
            border: 2px solid #ddd;
            border-radius: 4px;
            min-height: 800px;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª Newsroom í…ŒìŠ¤íŠ¸</h1>
    
    <div class="test-panel">
        <h2>1. ë°ì´í„° í™•ì¸</h2>
        <button onclick="testData()">ë°ì´í„° í…ŒìŠ¤íŠ¸</button>
        <button onclick="clearStorage()">LocalStorage ì´ˆê¸°í™”</button>
        <pre id="dataResult">ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”...</pre>
    </div>

    <div class="test-panel">
        <h2>2. JavaScript ë¡œë“œ í…ŒìŠ¤íŠ¸</h2>
        <button onclick="testJS()">JS í…ŒìŠ¤íŠ¸</button>
        <pre id="jsResult">ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”...</pre>
    </div>

    <div class="test-panel">
        <h2>3. Newsroom ë¯¸ë¦¬ë³´ê¸°</h2>
        <button onclick="openNewsroom()">ìƒˆ íƒ­ì—ì„œ ì—´ê¸°</button>
        <button onclick="showIframe()">iframeìœ¼ë¡œ ë³´ê¸°</button>
        <div id="iframeContainer"></div>
    </div>

    <script>
        function testData() {
            const result = document.getElementById('dataResult');
            let output = '=== ë°ì´í„° í…ŒìŠ¤íŠ¸ ===\n\n';
            
            // LocalStorage í™•ì¸
            const stored = localStorage.getItem('hillstone_press_items');
            if (stored) {
                try {
                    const items = JSON.parse(stored);
                    output += `<span class="success">âœ… LocalStorage ë°ì´í„°</span>\n`;
                    output += `   ì´ ${items.length}ê°œ\n`;
                    output += `   ì²«ë²ˆì§¸: ${items[0].title}\n\n`;
                } catch (e) {
                    output += `<span class="error">âŒ LocalStorage íŒŒì‹± ì˜¤ë¥˜</span>\n`;
                    output += `   ${e.message}\n\n`;
                }
            } else {
                output += `<span class="info">â„¹ï¸ LocalStorage ì—†ìŒ (ì •ìƒ)</span>\n`;
                output += `   getSampleData()ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤\n\n`;
            }
            
            // main.js í™•ì¸
            fetch('js/main.js?_=' + Date.now())
                .then(r => r.text())
                .then(text => {
                    const hasSampleData = text.includes('function getSampleData()');
                    const match = text.match(/return \[[\s\S]+?\{[\s\S]{0,500}/);
                    
                    if (hasSampleData) {
                        output += `<span class="success">âœ… getSampleData() í•¨ìˆ˜ ë°œê²¬</span>\n`;
                        output += `   íŒŒì¼ í¬ê¸°: ${text.length} bytes\n`;
                        
                        // ë°ì´í„° ê°œìˆ˜ ì¶”ì •
                        const items = text.match(/\{[\s\S]*?id:/g);
                        if (items) {
                            output += `   ì˜ˆìƒ ê¸°ì‚¬ ê°œìˆ˜: ${items.length}ê°œ\n`;
                        }
                    } else {
                        output += `<span class="error">âŒ getSampleData() í•¨ìˆ˜ ì—†ìŒ</span>\n`;
                    }
                    
                    result.innerHTML = output;
                })
                .catch(e => {
                    output += `<span class="error">âŒ main.js ë¡œë“œ ì‹¤íŒ¨</span>\n`;
                    output += `   ${e.message}\n`;
                    result.innerHTML = output;
                });
        }
        
        function clearStorage() {
            localStorage.removeItem('hillstone_press_items');
            alert('âœ… LocalStorage ì´ˆê¸°í™” ì™„ë£Œ!\ngetSampleData()ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
            testData();
        }
        
        function testJS() {
            const result = document.getElementById('jsResult');
            let output = '=== JavaScript í…ŒìŠ¤íŠ¸ ===\n\n';
            
            // Create test script
            const script = document.createElement('script');
            script.src = 'js/main.js?_=' + Date.now();
            
            script.onload = function() {
                setTimeout(() => {
                    if (typeof getSampleData === 'function') {
                        const data = getSampleData();
                        output += `<span class="success">âœ… getSampleData() ì‹¤í–‰ ì„±ê³µ</span>\n`;
                        output += `   ë°˜í™˜ëœ ë°ì´í„°: ${data.length}ê°œ\n`;
                        output += `   ì²«ë²ˆì§¸ ê¸°ì‚¬: "${data[0].title}"\n`;
                        output += `   ì¹´í…Œê³ ë¦¬: ${data[0].category}\n`;
                        output += `   ë‚ ì§œ: ${data[0].date}\n`;
                    } else {
                        output += `<span class="error">âŒ getSampleData() í•¨ìˆ˜ ì—†ìŒ</span>\n`;
                    }
                    
                    if (typeof allItems !== 'undefined') {
                        output += `\n<span class="success">âœ… allItems ë³€ìˆ˜ ì¡´ì¬</span>\n`;
                        output += `   ê°œìˆ˜: ${allItems.length}ê°œ\n`;
                    }
                    
                    result.innerHTML = output;
                }, 100);
            };
            
            script.onerror = function() {
                output += `<span class="error">âŒ main.js ë¡œë“œ ì‹¤íŒ¨</span>\n`;
                result.innerHTML = output;
            };
            
            document.body.appendChild(script);
        }
        
        function openNewsroom() {
            window.open('newsroom.html', '_blank');
        }
        
        function showIframe() {
            const container = document.getElementById('iframeContainer');
            container.innerHTML = '<iframe src="newsroom.html" id="newsroomFrame"></iframe>';
        }
    </script>
</body>
</html>
