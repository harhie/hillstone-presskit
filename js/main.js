// ========================================
// Hillstone Partners Press Kit
// Public Page Script (Auto-generated by Admin)
// ========================================

let currentPage = 1;
const itemsPerPage = 5;
let currentCategory = 'all';
let allItems = [];

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    loadPressItems();
    initializeEventListeners();
});

function initializeEventListeners() {
    const tabBtns = document.querySelectorAll('.tab-btn');
    tabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            tabBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            currentCategory = this.dataset.category;
            currentPage = 1;
            renderPressItems();
        });
    });
}

function loadPressItems() {
    console.log('Ã°ÂÂÂ¥ loadPressItems() Ã¬ÂÂÃ¬ÂÂ');
    const stored = localStorage.getItem('hillstone_press_items');
    if (stored) {
        try {
            allItems = JSON.parse(stored);
            console.log('Ã¢ÂÂ LocalStorage Ã«ÂÂ°Ã¬ÂÂ´Ã­ÂÂ° Ã«Â¡ÂÃ«ÂÂ:', allItems.length, 'ÃªÂ°Â');
        } catch (e) {
            console.error('Ã¢ÂÂ Error parsing stored data:', e);
            allItems = getSampleData();
            console.log('Ã°ÂÂÂ¦ getSampleData() Ã¬ÂÂ¬Ã¬ÂÂ©:', allItems.length, 'ÃªÂ°Â');
        }
    } else {
        allItems = getSampleData();
        console.log('Ã°ÂÂÂ¦ getSampleData() Ã¬ÂÂ¬Ã¬ÂÂ© (LocalStorage Ã¬ÂÂÃ¬ÂÂ):', allItems.length, 'ÃªÂ°Â');
    }
    console.log('Ã°ÂÂÂ¢ allItems Ã¬ÂµÂÃ¬Â¢Â:', allItems.length, 'ÃªÂ°Â');
    console.log('Ã¬Â²Â« Ã«Â²ÂÃ¬Â§Â¸ ÃªÂ¸Â°Ã¬ÂÂ¬:', allItems[0]?.title);
    updateCategoryCounts();
    renderPressItems();
}

function getSampleData() {
    return [
        {
            id: 'mhzsulx5g4dsj5q890v',
            title: '포블, 유망한 프로젝트 발굴과 네트워킹 활성화 이끈다',
            category: 'article',
            date: '2023-05-23',
            source: '파이낸셜 포스트',
            summary: '아너스자산운용, 한국디지털자산수탁, 힐스톤파트너스, 메타젤리스 등의 블록체인 분야의 여러 기업이 후원을 지원한다.',
            link: 'http://www.fintechpost.co.kr/news/articleView.html?idxno=167777',
            image: '',
            images: []
        },
        {
            id: 'mhzsulx5yrggjfv0d6',
            title: '도시문화융합컨퍼런스, CICON 호치민 2023, 다음달 6~8일 호치민시에서 개최... 스마트시티를 논한다.',
            category: 'article',
            date: '2023-05-09',
            source: '파이낸스투데이',
            summary: '\'블록체인 및 메타버스\'를 주제로 한국메타버스미디어협회 회장인 김형중 호서대학교 석좌교수가 좌장을 맡으며, 황라열 힐스톤파트너스 대표이사, 조현진 젤리스페이스 대표, 장진우 데이터시티위마켓 회장, 린 호앙 (Lynn Hoang) 바이낸스 SEA아시아 대표, 호앙 응옥 자롱(Hoang Ngọc Gia Long) 베트남블록체인연합(VBU) 부회장 등이 주제발표자로 참여한다.',
            link: 'https://www.fntoday.co.kr/news/articleView.html?idxno=292076',
            image: '',
            images: []
        },
        {
            id: 'mhzsulx5hykwpydv59',
            title: '\'크립토 성지\' DMCC 회장 \"기술력 갖춘 韓 기업, 두바이로 오라\"',
            category: 'article',
            date: '2023-03-15',
            source: '매경 이코노미',
            summary: '이날 행사에는 빈 술레얌 회장을 비롯해 신상진 성남시장, 압둘라 사이프 알누아이미 주한 UAE 대사, 김은수 MMK네트워크 대표, 황라열 힐스톤파트너스 대표 등이 참석했다.',
            link: 'https://www.mk.co.kr/news/business/10681170',
            image: '',
            images: []
        },
        {
            id: 'mhzsulx5uktqrts1has',
            title: '코리아씨이오서밋, 블록체인 컨퍼런스서 웹3.0 생태계 논의',
            category: 'article',
            date: '2023-02-27',
            source: '산업일보',
            summary: '\'웹 3.0 생태계의 구축\'을 주제로 열린 첫 번째 세션에서는 황석진 한국NFT학회 회장 겸 동국대학교 국제정보보호대학원 교수가 좌장을 맡았고, 황라열 힐스톤파트너스 대표 겸 한국핀테크협회 상임이사, 김기영 (주)모핑아이 대표이사, 박성준 한국블록체인연합회 회장 겸 (주)앤드어스 대표이사가 참여했다.',
            link: 'https://kidd.co.kr/news/231489',
            image: '',
            images: []
        },
        {
            id: 'mhzsulx5fnmpms3n4bf',
            title: '황라열 힐스톤파트너스 대표, 코리아씨이오서밋(KCS) 선정 \"한국의 빛, 융합경영대상\" 수상',
            category: 'article',
            date: '2023-02-26',
            source: '파이낸스투데이',
            summary: '황라열 힐스톤파트너스 대표가 지난 23일 \'웹3.0이 도시, 문화, 융합을 담다\'를 주제로 열린 코리아씨이오서밋 창립 20주년 기념 \'MARVELS & CICON 2023\' 에서 \'한국의 빛, 융합경영대상\'을 수상했다.',
            link: 'https://www.fntoday.co.kr/news/articleView.html?idxno=287938',
            image: '',
            images: []
        }
    ];
}

function updateCategoryCounts() {
    const counts = {
        all: allItems.length,
        article: allItems.filter(item => item.category === 'article').length,
        foreign: allItems.filter(item => item.category === 'foreign').length,
        photo: allItems.filter(item => item.category === 'photo').length,
        video: allItems.filter(item => item.category === 'video').length
    };
    document.querySelectorAll('.tab-btn').forEach(btn => {
        const category = btn.dataset.category;
        const text = btn.textContent.split('(')[0].trim();
        btn.textContent = `${text}(${counts[category]})`;
    });
}

function renderPressItems() {
    console.log('Ã°ÂÂÂ¨ renderPressItems() Ã¬ÂÂÃ¬ÂÂ');
    const container = document.getElementById('pressItemsList');
    console.log('Ã°ÂÂÂ¦ Container Ã¬ÂÂÃ¬ÂÂ:', container);
    const emptyState = document.getElementById('emptyState');
    let filteredItems = currentCategory === 'all' ? allItems : allItems.filter(item => item.category === currentCategory);
    console.log('Ã°ÂÂÂ Ã­ÂÂÃ­ÂÂ°Ã«Â§ÂÃ«ÂÂ ÃªÂ¸Â°Ã¬ÂÂ¬:', filteredItems.length, 'ÃªÂ°Â (Ã¬Â¹Â´Ã­ÂÂÃªÂ³Â Ã«Â¦Â¬:', currentCategory + ')');
    filteredItems.sort((a, b) => new Date(b.date) - new Date(a.date));
    if (filteredItems.length === 0) {
        console.log('Ã¢ÂÂ Ã¯Â¸Â ÃªÂ¸Â°Ã¬ÂÂ¬ Ã¬ÂÂÃ¬ÂÂ - Ã«Â¹Â Ã¬ÂÂÃ­ÂÂ Ã­ÂÂÃ¬ÂÂ');
        container.innerHTML = '';
        emptyState.style.display = 'block';
        document.getElementById('pagination').style.display = 'none';
        return;
    }
    emptyState.style.display = 'none';
    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    const pageItems = filteredItems.slice(startIndex, endIndex);
    console.log('Ã°ÂÂÂ Ã­ÂÂÃ¬ÂÂ¬ Ã­ÂÂÃ¬ÂÂ´Ã¬Â§Â ÃªÂ¸Â°Ã¬ÂÂ¬:', pageItems.length, 'ÃªÂ°Â (Ã­ÂÂÃ¬ÂÂ´Ã¬Â§Â:', currentPage + ')');
    const html = pageItems.map(item => createItemHTML(item)).join('');
    console.log('Ã°ÂÂÂ Ã¬ÂÂÃ¬ÂÂ±Ã«ÂÂ HTML ÃªÂ¸Â¸Ã¬ÂÂ´:', html.length);
    container.innerHTML = html;
    console.log('Ã¢ÂÂ HTML Ã¬ÂÂ½Ã¬ÂÂ Ã¬ÂÂÃ«Â£Â');
    renderPagination(filteredItems.length);
    attachItemClickHandlers();
}

function createItemHTML(item) {
    // Category badge removed - displaying title, date, source only 'ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂªÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ¸ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ°ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ¬ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ¬', foreign: 'ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ­ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ´ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ¬ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ¸ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂªÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ¸ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ°ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ¬ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ¬', photo: 'ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂªÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ³ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂµÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ¬ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ§ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ', video: 'ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ¬ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ¬ÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂÃÂ'};
    return `
        <div class="press-item" data-id="${item.id}">
            <h3 class="press-item-title">${escapeHtml(item.title)}</h3>
            <div class="press-item-meta">
                <span><i class="fas fa-calendar"></i> ${item.date}</span>
                <span><i class="fas fa-building"></i> ${escapeHtml(item.source)}</span>
            </div>
            ${item.summary ? `<p class="press-item-summary">${escapeHtml(item.summary)}</p>` : ''}
        </div>
    `;
}

function escapeHtml(text) {
    if (!text) return '';
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

function attachItemClickHandlers() {
    document.querySelectorAll('.press-item').forEach(item => {
        item.addEventListener('click', function() {
            const itemId = this.dataset.id;
            const itemData = allItems.find(i => i.id === itemId);
            if (itemData && itemData.link) {
                window.open(itemData.link, '_blank');
            }
        });
    });
}

function renderPagination(totalItems) {
    const pagination = document.getElementById('pagination');
    const totalPages = Math.ceil(totalItems / itemsPerPage);
    if (totalPages <= 1) {
        pagination.style.display = 'none';
        return;
    }
    pagination.style.display = 'flex';
    let paginationHTML = '';
    if (currentPage > 1) {
        paginationHTML += `<button class="pagination-btn" onclick="changePage(${currentPage - 1})"><i class="fas fa-chevron-left"></i></button>`;
    }
    for (let i = 1; i <= totalPages; i++) {
        if (i === currentPage) {
            paginationHTML += `<button class="pagination-btn active">${i}</button>`;
        } else if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
            paginationHTML += `<button class="pagination-btn" onclick="changePage(${i})">${i}</button>`;
        } else if (i === currentPage - 2 || i === currentPage + 2) {
            paginationHTML += `<span class="pagination-ellipsis">...</span>`;
        }
    }
    if (currentPage < totalPages) {
        paginationHTML += `<button class="pagination-btn" onclick="changePage(${currentPage + 1})"><i class="fas fa-chevron-right"></i></button>`;
    }
    pagination.innerHTML = paginationHTML;
}

function changePage(page) {
    currentPage = page;
    renderPressItems();
    window.scrollTo({ top: 0, behavior: 'smooth' });
}
